<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.second.space.mapper.AdminXMLMapper">
	<!-- 홈 - 신고 관리 접수 갯수 -->
	<select id="getNotificationCount" resultType="java.lang.Integer">
		SELECT COUNT(*) FROM notification_board /*WHERE n_notify_date BETWEEN sysdate-7 AND sysdate*/
		UNION ALL
		SELECT COUNT(*) FROM notification_cmt /*WHERE nc_notify_date BETWEEN sysdate-7 AND sysdate*/
		UNION ALL
		SELECT COUNT(*) FROM notification_review /*WHERE nr_notify_date BETWEEN sysdate-7 AND sysdate*/
	</select>
	
	<!-- 홈 - 통계 갯수 -->
	<select id="getStatsCount" resultType="java.lang.Integer">
		SELECT COUNT(*) FROM user_
		UNION ALL
		SELECT COUNT(*) FROM user_ WHERE user_delete = 'Y'
		UNION ALL
		SELECT COUNT(*) FROM board
		UNION ALL
		SELECT COUNT(*) FROM count_user_date
	</select>
	
	<!-- 홈 - 배너 관리 리스트 -->
	<select id="getNotificationAdList" resultType="com.second.space.admin.model.Notification_adDTO">
		SELECT * FROM notification_ad WHERE ROWNUM BETWEEN 1 AND 4 ORDER BY na_end_date
	</select>

	<resultMap type="com.second.space.admin.model.Admin_categoryDTO" id="Admin_categoryDTO">
	    <result column="ac_id" property="ac_id"/>
	    <result column="ac_code" property="ac_code"/>
	    <result column="ac_name" property="ac_name"/>
	</resultMap>
	
	<resultMap type="com.second.space.admin.model.Admin_empDTO" id="Admin_empDTO">
	    <result column="ae_id" property="ae_id"/>
	    <result column="ae_name" property="ae_name"/>
	    <result column="ae_class" property="ae_class"/>
	</resultMap>
	
	<resultMap type="com.second.space.admin.model.Notice_adminDTO" id="Notice_adminDTO">
 		<result column="notice_admin_id" property="notice_admin_id"/>
 		<result column="notice_admin_title" property="notice_admin_title"/>
 		<result column="notice_admin_content" property="notice_admin_content"/>
 		<result column="user_id" property="user_id"/>
 		<result column="notice_admin_date" property="notice_admin_date"/>
 		<result column="notice_admin_img" property="notice_admin_img"/>
 		<result column="notice_admin_view" property="notice_admin_view"/>
 		<result column="ac_id" property="ac_id"/>
 		<result column="ae_id" property="ae_id"/>
 		<collection property="acDTO" resultMap="Admin_categoryDTO"/>
 		<collection property="aeDTO" resultMap="Admin_empDTO"/>
 	</resultMap>

	<!-- 홈 - 어드민 안내 리스트 -->
	<select id="getNoticeAdminList" resultMap="Notice_adminDTO">
		SELECT * FROM notice_admin INNER JOIN admin_category USING(ac_id) INNER JOIN admin_emp USING(ae_id)
	</select>
</mapper>





